import{_ as R,c as l,o as i,a as o,x as v,n as F,g as S,y as w,t as u,z as U,A as j,j as b,B as q,C as z,D as _,E as C,k as I,l as M}from"./oj_p2zq5.js";import{g as f,S as y}from"./FdPegQMx.js";f.registerPlugin(y);const O={name:"FeedbackForm",setup(){const E=b(null),a=b(null),m=b(null),e=b(null),A=q(),x=z(()=>typeof window<"u"&&document.documentElement.getAttribute("data-theme")||"white"),t=z(()=>x.value==="white"?"/bg_Feedback-white.png":"/bg_Feedback-dark.png"),r=_({name:"",email:"",phone:"",message:""}),n=_({name:"",email:"",phone:"",message:""}),h=_({name:!1,email:!1,phone:!1,message:!1}),T=b(!1),c=_({success:!1,message:""}),V=()=>{let s=!0;!r.name||r.name.trim().length<2?(n.name="Имя должно содержать не менее 2 символов",g("name"),s=!1):n.name="";const d=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;!r.email||!d.test(r.email)?(n.email="Пожалуйста, введите корректный email",g("email"),s=!1):n.email="";const p=/^(\+998|998|8)?[\s\-]?(\d{2}|\(\d{2}\))[\s\-]?\d{3}[\s\-]?\d{2}[\s\-]?\d{2}$|^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/;return!r.phone||!p.test(r.phone)?(n.phone="Пожалуйста, введите корректный номер телефона",g("phone"),s=!1):n.phone="",!r.message||r.message.trim().length<10?(n.message="Сообщение должно содержать не менее 10 символов",g("message"),s=!1):n.message="",s},g=s=>{h[s]=!0,setTimeout(()=>{h[s]=!1},2e3)},B=s=>{n[s]="",h[s]=!1},P=async()=>{if(V()){T.value=!0,c.success=!1,c.message="";try{const d=await(await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();!d.success&&d.errors?Object.keys(d.errors).forEach(p=>{n[p]=d.errors[p],g(p)}):d.success&&(r.name="",r.email="",r.phone="",r.message="",c.success=!0,c.message=d.message,m.value&&f.fromTo(".success-message",{opacity:0,y:20},{opacity:1,y:0,duration:.5,ease:"power2.out"}),setTimeout(()=>{c.message="",c.success=!1},5e3))}catch(s){console.error("Ошибка при отправке формы:",s),c.success=!1,c.message="Произошла ошибка при отправке формы. Пожалуйста, попробуйте позже."}finally{T.value=!1}}},k=()=>{if(!a.value||!m.value||!e.value)return;f.set(a.value,{y:50,opacity:0}),f.set(m.value.querySelectorAll(".form-group"),{y:30,opacity:0}),f.set(m.value.querySelector("button"),{y:0,opacity:0}),f.set(e.value,{x:50,opacity:0}),f.timeline({scrollTrigger:{trigger:E.value,start:"top 80%",end:"bottom 20%",toggleActions:"play none none reverse"}}).to(a.value,{y:0,opacity:1,duration:.8,ease:"power2.out"}).to(m.value.querySelectorAll(".form-group"),{y:0,opacity:1,stagger:.2,duration:.5,ease:"power2.out"},"-=0.4").to(m.value.querySelector("button"),{y:0,opacity:1,duration:.5,ease:"power2.out",clearProps:"transform"},"-=0.2").to(e.value,{x:0,opacity:1,duration:.8,ease:"power2.out"},"-=0.6")};C(()=>A.fullPath,()=>{console.log("Route changed, reinitializing feedback form animation"),y.getAll().forEach(s=>s.kill()),setTimeout(()=>{k()},300)}),C(x,()=>{typeof window<"u"&&(y.getAll().forEach(s=>s.kill()),setTimeout(()=>{k()},300))}),I(()=>{setTimeout(()=>{k()},500),window.addEventListener("resize",D)});const D=()=>{y.getAll().forEach(s=>s.kill()),setTimeout(()=>{k()},300)};return M(()=>{window.removeEventListener("resize",D),y.getAll().forEach(s=>s.kill())}),{feedbackSection:E,feedbackText:a,feedbackForm:m,consultationCard:e,formData:r,errors:n,animationFields:h,isSubmitting:T,formStatus:c,submitForm:P,clearError:B,backgroundImage:t}}},Z={class:"feedback-section",ref:"feedbackSection"},L={class:"feedback-bg"},N=["src"],J={class:"feedback-container"},W={class:"feedback-left"},G={class:"feedback-text",ref:"feedbackText"},H={class:"feedback-form",ref:"feedbackForm"},K={key:0,class:"error-message"},Q={key:0,class:"error-message"},X={key:0,class:"error-message"},Y={key:0,class:"error-message"},$=["disabled"],ee={key:0},ae={key:1,class:"spinner"},se={key:0,class:"form-status"},oe={key:0,class:"success-message"},te={key:1,class:"error-message-global"},re={class:"feedback-right"},ne={class:"consultation-card",ref:"consultationCard"};function le(E,a,m,e,A,x){return i(),l("section",Z,[o("div",L,[o("img",{src:e.backgroundImage,alt:"Фоновый узор"},null,8,N)]),o("div",J,[o("div",W,[o("div",G,a[9]||(a[9]=[o("h2",null,"Оставить обратную связь",-1),o("p",null,"Остались вопросы или есть предложения? Напишите нам – мы всегда на связи!",-1)]),512),o("div",H,[o("div",{class:F(["form-group",{error:e.errors.name,"pulse-animation":e.animationFields.name}])},[a[10]||(a[10]=o("label",{for:"name"},"Имя",-1)),S(o("input",{type:"text",id:"name",placeholder:"Ваше имя...","onUpdate:modelValue":a[0]||(a[0]=t=>e.formData.name=t),onFocus:a[1]||(a[1]=t=>e.clearError("name"))},null,544),[[w,e.formData.name]]),e.errors.name?(i(),l("span",K,u(e.errors.name),1)):v("",!0)],2),o("div",{class:F(["form-group",{error:e.errors.email,"pulse-animation":e.animationFields.email}])},[a[11]||(a[11]=o("label",{for:"email"},"Email",-1)),S(o("input",{type:"email",id:"email",placeholder:"user.name@email.com","onUpdate:modelValue":a[2]||(a[2]=t=>e.formData.email=t),onFocus:a[3]||(a[3]=t=>e.clearError("email"))},null,544),[[w,e.formData.email]]),e.errors.email?(i(),l("span",Q,u(e.errors.email),1)):v("",!0)],2),o("div",{class:F(["form-group",{error:e.errors.phone,"pulse-animation":e.animationFields.phone}])},[a[12]||(a[12]=o("label",{for:"phone"},"Телефон",-1)),S(o("input",{type:"tel",id:"phone",placeholder:"+998 90 111 22 33","onUpdate:modelValue":a[4]||(a[4]=t=>e.formData.phone=t),onFocus:a[5]||(a[5]=t=>e.clearError("phone"))},null,544),[[w,e.formData.phone]]),e.errors.phone?(i(),l("span",X,u(e.errors.phone),1)):v("",!0)],2),o("div",{class:F(["form-group",{error:e.errors.message,"pulse-animation":e.animationFields.message}])},[a[13]||(a[13]=o("label",{for:"message"},"Сообщение",-1)),S(o("textarea",{id:"message",placeholder:"Пожалуйста, введите ваше сообщение здесь... (необязательно)","onUpdate:modelValue":a[6]||(a[6]=t=>e.formData.message=t),onFocus:a[7]||(a[7]=t=>e.clearError("message"))},null,544),[[w,e.formData.message]]),e.errors.message?(i(),l("span",Y,u(e.errors.message),1)):v("",!0)],2),o("button",{class:"feedback-submit",onClick:a[8]||(a[8]=U((...t)=>e.submitForm&&e.submitForm(...t),["prevent"])),disabled:e.isSubmitting},[e.isSubmitting?(i(),l("span",ae)):(i(),l("span",ee,"Отправить сообщение"))],8,$),e.formStatus.message?(i(),l("div",se,[e.formStatus.success?(i(),l("div",oe,u(e.formStatus.message),1)):(i(),l("div",te,u(e.formStatus.message),1))])):v("",!0)],512)]),o("div",re,[o("div",ne,a[14]||(a[14]=[j('<h3 data-v-3f7cac81>Консультация по проекту</h3><p data-v-3f7cac81>Чтобы узнать больше о наших услугах, заполните заявку или позвоните нам. Мы расскажем вам, как мы можем помочь вашему бизнесу.</p><div class="consultation-info" data-v-3f7cac81><div class="consultation-item" data-v-3f7cac81><span class="consultation-label" data-v-3f7cac81>Телефон:</span><span class="consultation-value" data-v-3f7cac81><a href="tel:+998941452332" data-v-3f7cac81> +998 (94) 145-23-32</a></span></div><div class="consultation-item" data-v-3f7cac81><span class="consultation-label" data-v-3f7cac81>Email:</span><span class="consultation-value" data-v-3f7cac81><a href="devx.brand@gmail.com" data-v-3f7cac81> devx.brand@gmail.com</a></span></div><div class="consultation-item" data-v-3f7cac81><span class="consultation-label" data-v-3f7cac81>Адрес:</span><span class="consultation-value" data-v-3f7cac81>Тошкент шахар Янгихаёт тумани ул. Райхон, дом F 03-2158</span></div></div>',3)]),512)])])],512)}const me=R(O,[["render",le],["__scopeId","data-v-3f7cac81"]]);export{me as F};
